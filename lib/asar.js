// Generated by CoffeeScript 1.8.0
var AsarArchive, createArchive, extractArchive, extractDirectoryFromArchive, extractFileFromArchive, getEntries, loadArchive;

AsarArchive = require('./archive');

createArchive = function(srcDir, destFile, cb) {
  var archive;
  archive = new AsarArchive();
  if (srcDir != null) {
    archive.addDirectory(srcDir, srcDir, function(err) {
      if (destFile != null) {
        return archive.write(destFile, {}, function(err) {
          return cb(err, archive);
        });
      }
    });
  }
};

loadArchive = function(archiveFilename) {
  var archive;
  archive = new AsarArchive();
  archive.openSync(archiveFilename);
  return archive;
};

getEntries = function(archiveFilename, archiveRoot) {
  var archive, list;
  if (archiveRoot == null) {
    archiveRoot = '/';
  }
  archive = loadArchive(archiveFilename);
  list = archive.getEntries(archiveRoot);
  return list;
};

extractArchive = function(archiveFilename, destDir) {
  var archive;
  archive = loadArchive(archiveFilename);
  archive.extractSync(destDir);
};

extractFileFromArchive = function(archiveFilename, filename, destFilename) {
  var archive;
  archive = loadArchive(archiveFilename);
  archive.extractFileSync(filename, destFilename);
};

extractDirectoryFromArchive = function(archiveFilename, dirname, destDir) {
  var archive;
  archive = loadArchive(archiveFilename);
  archive.extractSync(destDir, dirname);
};

module.exports = {
  AsarArchive: AsarArchive,
  createArchive: createArchive,
  loadArchive: loadArchive,
  getEntries: getEntries,
  extractArchive: extractArchive,
  extractFileFromArchive: extractFileFromArchive,
  extractDirectoryFromArchive: extractDirectoryFromArchive
};
